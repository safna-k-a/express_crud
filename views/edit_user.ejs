<%-include('header')-%>
<div class="container">
    <div class="sec row justify-content-center mt-5">
        <div class="ms-2 col-5">
            <div class="login mt-5">
                <% if (typeof msg !== 'undefined' && msg) { %>
                <div class="alert alert-danger" id="alert-msg" role="alert">
                    <%= msg %>
                </div>
                <% } %>
                <form
                    action="/update/<%=user._id%>"
                    method="POST"
                    id="add-form"
                    enctype="multipart/form-data"
                >
                    <h2>Edit User (<%=user.name%>)</h2>
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input
                            type="text"
                            class="form-control"
                            id="name"
                            placeholder="Enter Name"
                            value="<%=user.name%>"
                            name="name"
                        />
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input
                            type="email"
                            class="form-control"
                            id="email"
                            placeholder="Enter email"
                            value="<%=user.email%>"
                            name="email"
                        />
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input
                            type="password"
                            class="form-control"
                            id="password"
                            placeholder="Password"
                            name="password"
                        />
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone</label>
                        <input
                            type="phone"
                            class="form-control"
                            id="phone"
                            placeholder="Ente Phone Number"
                            value="<%=user.phone%>"
                            name="phone"
                        />
                    </div>
                    <div class="form-group">
                        <label for="image">Select Image</label>
                        <input
                            type="file"
                            class="form-control"
                            id="image"
                            name="image"
                        />
                        <img
                            src="/<%=user.image%>"
                            width="100"
                            class="img-thumbnail mt-1"
                            alt="test"
                        />
                        <input
                            type="hidden"
                            name="old_image"
                            value="<%=user.image%>"
                        />
                    </div>
                    <div class="form-group mt-3">
                        <label>Status</label><br />
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio"
                            name="isAdmin" id="admin" value="true" <%=
                            user.isAdmin ? 'checked' : '' %> />
                            <label class="form-check-label" for="admin"
                                >Admin</label
                            >
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio"
                            name="isAdmin" id="user" value="false" <%=
                            !user.isAdmin ? 'checked' : '' %> />
                            <label class="form-check-label" for="user"
                                >User</label
                            >
                        </div>
                    </div>
                    <button type="submit" class="btn mt-3">Update User</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    window.onload = function () {
        var alert = document.getElementById("alert-msg");
        if (alert) {
            setTimeout(function () {
                alert.style.display = "none";
            }, 3000);
        }
    };
</script>
<%-include('footer')-%>
